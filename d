import requests,os,sys,time,webbrowser
from tqdm import tqdm , trange
from bs4 import BeautifulSoup as BS
f=("\033[1;92m--------------- Design BY Dark ---------------")
for e in f:
 sys.stdout.write(e)
 sys.stdout.flush()
 time.sleep(0.03)
print()
print(ho2) 
logo='''\033[1;92m

 /$$$$$$$                      /$$            
| $$__  $$                    | $$            
| $$  \ $$  /$$$$$$   /$$$$$$ | $$   /$$      
| $$  | $$ |____  $$ /$$__  $$| $$  /$$/      
| $$  | $$  /$$$$$$$| $$  \__/| $$$$$$/       
| $$  | $$ /$$__  $$| $$      | $$_  $$       
| $$$$$$$/|  $$$$$$$| $$      | $$ \  $$      
|_______/  \_______/|__/      |__/  \__/      
                                              
                                              
'''
for y in logo:
	sys.stdout.write(y)
	sys.stdout.flush()
	time.sleep(0.003)
p=("https://t.me/Darkteam123")
for e in p:
	sys.stdout.write(e)
	sys.stdout.flush()
	time.sleep(0.03)
print()  
l=("\033[1;92m--------------- Script Wasla Browser ---------------")
for v in l:
 sys.stdout.write(v)
 sys.stdout.flush()
 time.sleep(0.03)  
print()
number = input('\033[1;92mNumber: ')
print("\033[1;92m-"*50)
DarkPas = input('\033[1;92mPassword: ')
print("\033[1;92m-"*50)
headers = {'Host':'gw.waslabrowser.com', 
 'accept-language':'ar', 
 'content-type':'application/x-www-form-urlencoded', 
 'content-length':'433', 
 'accept-encoding':'gzip', 
 'user-agent':'okhttp/4.7.2'}
data = {'grant_type':'password', 
 'client_id':'waslaAndroidClient', 
 'client_secret':'17fc454a-e631-493d-becc-e49afe9e6cd2', 
 'scope':'offline_access profile openid content.trending content.videos content.foryou quicklinks.read quicklinks.update announcements.read missions.read announcements.dismiss announcements.impressions promocodes.redeem announcements.impressions cashout.charge', 
 'username':number, 
 'password':DarkPas}
hhi = requests.post('https://gw.waslabrowser.com/identity-v2/connect/token', headers=headers, data=data).json()
if 'access_token' in str(hhi):
    print('\033[1;92mDone login')
    print("\033[1;92m-"*50)
    token = hhi['access_token']
else:
    print('\033[1;91mWrong Number or Password')
    import sys
    sys.exit()
headers1 = {'Host':'gw.waslabrowser.com', 
 'accept-language':'ar', 
 'authorization':'Bearer ' + str(token), 
 'accept-encoding':'gzip', 
 'user-agent':'okhttp/4.7.2'}
from requests.structures import CaseInsensitiveDict
url = 'https://promo-pprod.waslabrowser.com/redeem/'
headers = CaseInsensitiveDict()
headers['Host'] = 'promo-pprod.waslabrowser.com'
headers['content-length'] = '17'
headers['accept'] = 'application/json, text/plain, */*'
headers['authorization'] = 'Bearer ' + str(token).replace('\n', '')
headers['user-agent'] = 'Mozilla/5.0 (Linux; Android 8.0.0; LDN-L21) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.152 Mobile Safari/537.36'
headers['Content-Type'] = 'application/json'
headers['origin'] = 'https://pwa-beta.waslabrowser.com'
headers['sec-fetch-site'] = 'same-site'
headers['sec-fetch-mode'] = 'cors'
headers['sec-fetch-dest'] = 'empty'
headers['referer'] = 'https://pwa-beta.waslabrowser.com/'
headers['accept-encoding'] = 'gzip, deflate, br'
headers['accept-language'] = 'ar-AW,ar;q=0.9,en-GB;q=0.8,en;q=0.7,en-US;q=0.6'
for jhgj in range(0, 999999999999):
    import random
    code = random.choice(['nvAoPP', 'egZRKbJM', 'mxxRPE', 'nRYEjv', 'mJdjbq', 'mQBYra', 'MkexNp', 'nPkXGA', 'DEroXY', 'maxVdz', 'mbZJVO', 'nXbGWQ'])
    data = '{"code":"' + code + '"}'
    Dar = requests.post(url, headers=headers, data=data).text
    if 'Reward error' in str(Dar):
        print('\033[1;91mCode Reward is Stopped')
        print("\033[1;92m-"*50)
        time.sleep(1)
    elif '60' in str(Dar):
        exec('u="3"')
    else:
        print('\033[1;92mDone win 150 points')
        print(requests.get('https://gw.waslabrowser.com/points/user/points/active', headers=headers1).json()['ActivePoints'])
        time.sleep(1)
